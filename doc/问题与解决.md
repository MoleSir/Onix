# 问题与解决

记录实现过程中遇到的问题与解决方式：

## bochs 

bochs 无法启动，错误：could not open hard drive image file "../build/master.img"；
    
解决方法：镜像文件目录，即 ../build/ 下的 master.img.lock 文件删除即可；


## gcc -m32 链接错误

添加 `-m32` 指定 32 位模式时，可能会发生 `/usr/bin/ld: skipping incompatible ... *.so` 的错误，这时可能需要安装 32 位动态链接库：
    
````bash
sudo pacman -S lib32-gcc-libs
````


## 时钟中断

时钟中断无法正确开启；

原作给出的 `pic_init` 不适用，修改为：

````c
void pic_init() 
{
    outb(PIC_M_CTRL, 0x11);
    outb(PIC_S_CTRL, 0x11);

    outb(PIC_M_DATA, 0x20);
    outb(PIC_S_DATA, 0x28);

    outb(PIC_M_DATA, 0x04);
    outb(PIC_S_DATA, 0x02);

    outb(PIC_M_DATA, 0x01);
    outb(PIC_S_DATA, 0x01);

    outb(PIC_M_DATA, 0b11111110);
    outb(PIC_S_DATA, 0b11111111);
}
````